import{j as g,L as h,r as a,R as C,a as u,O as k,b as P,c as O,B as N}from"./vendor.99e1cfb1.js";const j=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))p(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&p(d)}).observe(document,{childList:!0,subtree:!0});function c(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerpolicy&&(l.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?l.credentials="include":n.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function p(n){if(n.ep)return;n.ep=!0;const l=c(n);fetch(n.href,l)}};j();const e=g.exports.jsx,t=g.exports.jsxs,L=g.exports.Fragment;function M(){return t("nav",{children:[e("header",{children:"Masky Client"}),t("div",{className:"container ",children:[e(h,{to:"/",children:"Overview"}),e(h,{to:"/setting",children:"Setting"}),e(h,{to:"/connections",children:"Connections"}),e(h,{to:"/logs",children:"Logs"}),e(h,{to:"/about",children:"About"})]})]})}function R(){return t("main",{children:[e("h3",{children:"About"}),e("a",{href:"https://github.com/wkj9893/masky",target:"_blank",children:"source code"})]})}function I(){return t("main",{children:[e("h3",{children:"Overview"}),e("button",{children:"Reconnect Server"})]})}function D(){const[s,o]=a.exports.useState(0),[c,p]=a.exports.useState(""),[n,l]=a.exports.useState(""),[d,m]=a.exports.useState(""),[f,v]=a.exports.useState(""),[b,S]=a.exports.useState("true"),[y,w]=a.exports.useState("info");a.exports.useEffect(()=>{(async()=>{const i=await(await fetch("/api/setting")).json();o(i.port),p(i.mode),l(i.addr),m(i.dns),v(i.password),S(i.allowLan?"true":"false"),w(i.logLevel)})()},[]);async function A(r){r.preventDefault();const x={port:s,mode:c,addr:n,dns:d,password:f,allowLan:b==="true",logLevel:y},i=await fetch("/api/setting",{method:"PATCH",body:JSON.stringify(x)});if(i.ok){alert("successfully update setting");return}console.error("fail to update setting",i)}return t("main",{children:[e("h3",{children:"Setting"}),t("form",{onSubmit:A,children:[t("label",{children:["Port:",e("input",{type:"number",value:s,onChange:r=>{o(r.target.valueAsNumber)}})]}),t("label",{children:["Mode:",t("select",{value:c,onChange:r=>{p(r.target.value)},children:[e("option",{value:"direct",children:"direct"}),e("option",{value:"rule",children:"rule"}),e("option",{value:"global",children:"global"})]})]}),t("label",{children:["Addr:",e("input",{value:n,onChange:r=>{l(r.target.value)}})]}),t("label",{children:["Dns:",e("input",{value:d,onChange:r=>{m(r.target.value)}})]}),t("label",{children:["Password:",e("input",{type:"password",value:f,onChange:r=>{v(r.target.value)}})]}),t("label",{children:["AllowLan:",t("select",{value:b,onChange:r=>{S(r.target.value)},children:[e("option",{value:"true",children:"true"}),e("option",{value:"false",children:"false"})]})]}),t("label",{children:["LogLevel:",t("select",{value:y,onChange:r=>{w(r.target.value)},children:[e("option",{value:"info",children:"info"}),e("option",{value:"warn",children:"warn"}),e("option",{value:"error",children:"error"})]})]}),e("button",{children:"Update Setting"})]})]})}function q(){const[s,o]=a.exports.useState(["hello","world"]);return t("main",{children:[e("h3",{children:"Logs"}),s.map(c=>{})]})}function T(){const[s,o]=a.exports.useState("");return a.exports.useEffect(()=>{if(s)document.querySelector(":root").setAttribute("theme",s),localStorage.setItem("theme",s);else{const c=localStorage.getItem("theme");if(c){o(c),document.querySelector(":root").setAttribute("theme",c);return}window.matchMedia("(prefers-color-scheme: dark)").matches?(o("dark"),document.querySelector(":root").setAttribute("theme","dark"),localStorage.setItem("theme","dark")):(o("light"),document.querySelector(":root").setAttribute("theme","light"),localStorage.setItem("theme","light"))}},[s]),[s,o]}function E(){return a.exports.useState([]),e("main",{children:e("h3",{children:"Connections"})})}function B(){const[s,o]=T();return t("div",{className:"app",children:[e(C,{children:t(u,{path:"/",element:e(F,{}),children:[e(u,{path:"/",element:e(I,{})}),e(u,{path:"/setting",element:e(D,{})}),e(u,{path:"/connections",element:e(E,{})}),e(u,{path:"/logs",element:e(q,{})}),e(u,{path:"/about",element:e(R,{})}),e(u,{path:"*",element:e(G,{})})]})}),e("button",{style:{position:"absolute",right:"100px",width:"60px",height:"40px"},onClick:()=>{o(s==="light"?"dark":"light")},children:"Switch Theme"})]})}function F(){return t(L,{children:[e(M,{}),e(k,{})]})}function G(){return t(L,{children:[e("h3",{children:"Nothing to see here"}),e(h,{to:"/",children:e("h3",{children:"Go to the home page"})})]})}P.render(e(O.StrictMode,{children:e(N,{children:e(B,{})})}),document.getElementById("root"));
